# SOAR-0006: Tag specific API protocol

Generate protocols based on tags instead of a single `APIProtocol`.

## Overview

- Proposal: SOAR-006
- Author(s): [Jakub Olejn√≠k](https://github.com/olejnjak)
- Status: **Awaiting Review**
- Issue: [apple/swift-openapi-generator#285](https://github.com/apple/swift-openapi-generator/issues/285)
- Implementation:
    - nothing yet
    <!-- - [apple/swift-openapi-generator#1](https://github.com/apple/swift-openapi-generator/pull/1)-->
- Feature flag: nothing yet<!--`proposalNNNN`-->
- Affected components:
    - generator

### Introduction

Generate protocols based on tags instead of a single `APIProtocol`.

### Motivation

Currently if the API spec is huge, the `APIProtocol` becomes huge also, that might make e.g. testing a bit more difficult, that introduces uncomfortable inconvenience that makes testing a bit more complicated.

### Proposed solution

We will group API calls based on tags to separate protocols, so given following API spec will generate two protocols `PetsAPIProtocol` & `StoreAPIProtocol`.

```yaml
paths:
  /pet/findByStatus:
    get:
      summary: Finds pets by Status
      tags:
        - pets
      ...
  /pet:
    post:
      summary: Adds a new pet to the store
      tags:
        - pets
      ...
  /store/inventory:
    get:
      summary: Returns pet inventories
      tags:
        - store
      ...
```



### Detailed design

Currently I only have an idea and no prototype exists, my current knowledge of current generator implementation is basically none, only from user perspective.

### API stability

This change can be non-breaking as `APIProtocol` could still be generated, but it will extend all the generated protocols.

In my opinion I would prefer this change to be breaking or configurable as I wanna make testing as comfortable as possible.

### Future directions

Potentially it might be an idea to also generate tag specific clients, but at least for now I don't see any additional value as by design the developer should not work with the client itself.

### Alternatives considered

Not sure.